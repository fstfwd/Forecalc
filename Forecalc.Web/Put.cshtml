@using Forecalc.Web.Models;

@{
    var row = int.Parse(Request["row"]);
    var col = int.Parse(Request["col"]);
    var expr = Request["expr"];

    Response.ContentType = "application/json";
    
    try
    {
        var values = Functions.Put(row, col, expr);
        Json.Write(values, Response.Output);
    }
    catch (Exception e)
    {
        Response.StatusCode = (int)HttpStatusCode.BadRequest;
        Json.Write(new {e.Message}, Response.Output);
    }
}
